{"ast":null,"code":"var _jsxFileName = \"/home/ec2-user/environment/myapp/src/App.js\";\nimport React, { useEffect, useReducer } from 'react';\nimport API, { graphqlOperation } from '@aws-amplify/api';\nimport PubSub from '@aws-amplify/pubsub';\nimport { createTodo } from './graphql/mutations';\nimport { listTodos } from './graphql/queries';\nimport { onCreateTodo } from './graphql/subscriptions';\nimport awsconfig from './aws-exports';\nimport './App.css';\nAPI.configure(awsconfig);\nPubSub.configure(awsconfig); // Action Types\n\nconst QUERY = 'QUERY';\nconst SUBSCRIPTION = 'SUBSCRIPTION';\nconst initialState = {\n  todos: []\n};\n\nconst reducer = (state, action) => {\n  switch (action.type) {\n    case QUERY:\n      return { ...state,\n        todos: action.todos\n      };\n\n    case SUBSCRIPTION:\n      return { ...state,\n        todos: [...state.todos, action.todo]\n      };\n\n    default:\n      return state;\n  }\n};\n\nasync function createNewTodo() {\n  const todo = {\n    name: \"Use AWS AppSync\",\n    description: \"RealTime and Offline\"\n  };\n  await API.graphql(graphqlOperation(createTodo, {\n    input: todo\n  }));\n}\n\nfunction App() {\n  const [state, dispatch] = useReducer(reducer, initialState);\n  useEffect(() => {\n    async function getData() {\n      const todoData = await API.graphql(graphqlOperation(listTodos));\n      dispatch({\n        type: QUERY,\n        todos: todoData.data.listTodos.items\n      });\n    }\n\n    getData();\n    const subscription = API.graphql(graphqlOperation(onCreateTodo)).subscribe({\n      next: eventData => {\n        const todo = eventData.value.data.onCreateTodo;\n        dispatch({\n          type: SUBSCRIPTION,\n          todo\n        });\n      }\n    });\n    return () => subscription.unsubscribe();\n  }, []);\n  return React.createElement(\"div\", {\n    className: \"App\",\n    style: {\n      height: \"100vh\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63\n    },\n    __self: this\n  }, state.todos.length > 0 ? state.todos.map(todo => React.createElement(\"p\", {\n    key: todo.id,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65\n    },\n    __self: this\n  }, todo.name, \" : \", todo.description)) : React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66\n    },\n    __self: this\n  }, \"HOW CAN I HELP YOU!\")), React.createElement(\"div\", {\n    className: \"Message\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69\n    },\n    __self: this\n  }, React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70\n    },\n    __self: this\n  }, \"HOW CAN I HELP YOU?\")));\n}\n\nexport default App;","map":{"version":3,"sources":["/home/ec2-user/environment/myapp/src/App.js"],"names":["React","useEffect","useReducer","API","graphqlOperation","PubSub","createTodo","listTodos","onCreateTodo","awsconfig","configure","QUERY","SUBSCRIPTION","initialState","todos","reducer","state","action","type","todo","createNewTodo","name","description","graphql","input","App","dispatch","getData","todoData","data","items","subscription","subscribe","next","eventData","value","unsubscribe","height","length","map","id"],"mappings":"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","sourcesContent":["import React, { useEffect, useReducer } from 'react';\n\nimport API, { graphqlOperation } from '@aws-amplify/api';\nimport PubSub from '@aws-amplify/pubsub';\n\nimport { createTodo } from './graphql/mutations';\nimport { listTodos } from './graphql/queries';\nimport { onCreateTodo } from './graphql/subscriptions';\n\nimport awsconfig from './aws-exports';\nimport './App.css';\n\nAPI.configure(awsconfig);\nPubSub.configure(awsconfig);\n\n// Action Types\nconst QUERY = 'QUERY';\nconst SUBSCRIPTION = 'SUBSCRIPTION';\n\nconst initialState = {\n  todos: [],\n};\n\nconst reducer = (state, action) => {\n  switch (action.type) {\n    case QUERY:\n      return {...state, todos: action.todos};\n    case SUBSCRIPTION:\n      return {...state, todos:[...state.todos, action.todo]}\n    default:\n      return state;\n  }\n};\n\nasync function createNewTodo() {\n  const todo = { name: \"Use AWS AppSync\", description: \"RealTime and Offline\" };\n  await API.graphql(graphqlOperation(createTodo, { input: todo }));\n}\n\nfunction App() {\n  const [state, dispatch] = useReducer(reducer, initialState);\n\n  useEffect(() => {\n    async function getData() {\n      const todoData = await API.graphql(graphqlOperation(listTodos));\n      dispatch({ type: QUERY, todos: todoData.data.listTodos.items });\n    }\n    getData();\n\n    const subscription = API.graphql(graphqlOperation(onCreateTodo)).subscribe({\n      next: (eventData) => {\n        const todo = eventData.value.data.onCreateTodo;\n        dispatch({ type: SUBSCRIPTION, todo });\n      }\n    });\n\n    return () => subscription.unsubscribe();\n  }, []);\n\n  return (\n    <div className=\"App\"style = {{height:\"100vh\"}} >\n      {/*<button onClick={createNewTodo}>Add Todo</button>*/}\n      <div>\n        {state.todos.length > 0 ? \n          state.todos.map((todo) => <p key={todo.id}>{todo.name} : {todo.description}</p>) :\n          <p>HOW CAN I HELP YOU!</p> \n        }\n      </div>\n      <div className=\"Message\">\n       <p>HOW CAN I HELP YOU?</p>\n       </div>\n    </div>\n  );\n}\n\nexport default App;\n\n\n"]},"metadata":{},"sourceType":"module"}