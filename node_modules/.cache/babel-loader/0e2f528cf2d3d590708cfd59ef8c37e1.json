{"ast":null,"code":"var _jsxFileName = \"/home/ec2-user/environment/myapp/src/App.js\";\nimport React, { useEffect, useReducer, useState } from 'react';\nimport API, { graphqlOperation } from '@aws-amplify/api';\nimport Amplify, { PubSub, Predictions } from 'aws-amplify';\nimport { AWSIoTProvider } from '@aws-amplify/pubsub/lib/Providers';\nimport { AmazonAIPredictionsProvider } from '@aws-amplify/predictions';\nimport TextLoop from \"react-text-loop\";\nimport cxs from \"cxs/component\";\nimport { Textfit } from 'react-textfit';\nimport OccamyText from 'react-occamy-text';\nimport Modal from 'react-awesome-modal';\nimport IframeComponent from './lib/IframeComponent';\nimport { Box, Grommet } from 'grommet';\nimport mic from 'microphone-stream';\nimport $ from 'jquery';\nimport streamAudioToWebSocket from \"./lib/main.js\";\nimport showError from \"./lib/main.js\";\nimport { startbutton } from \"./lib/main.js\";\nimport { stopbutton } from \"./lib/main.js\";\nimport { resetbutton } from \"./lib/main.js\";\nimport AWS_logo from \"./images/AWS_logo_RGB_WHT.png\"; // Spinner lib\n\nimport { WaveSpinner } from \"react-spinners-kit\";\nimport awsconfig from './aws-exports';\nimport './App.css'; // IoT subscription\n\nAmplify.configure({\n  Auth: {\n    identityPoolId: process.env.REACT_APP_IDENTITY_POOL_ID,\n    region: process.env.REACT_APP_REGION,\n    userPoolId: process.env.REACT_APP_USER_POOL_ID,\n    userPoolWebClientId: process.env.REACT_APP_USER_POOL_WEB_CLIENT_ID\n  },\n  predictions: {\n    convert: {\n      transcription: {\n        region: \"us-east-1\",\n        proxy: false,\n        defaults: {\n          \"language\": \"en-US\"\n        }\n      }\n    }\n  }\n});\nAmplify.addPluggable(new AWSIoTProvider({\n  aws_pubsub_region: process.env.REACT_APP_REGION,\n  aws_pubsub_endpoint: `wss://${process.env.REACT_APP_MQTT_ID}.iot.${process.env.REACT_APP_REGION}.amazonaws.com/mqtt`\n}));\nAmplify.addPluggable(new AmazonAIPredictionsProvider());\nconst StyledTextLoop = cxs(TextLoop)({\n  display: \"block\"\n});\n\nvar pubSubsensoff = async () => {\n  await Amplify.PubSub.publish('lcd-message', {\n    message: '',\n    presence: 0\n  });\n};\n\nvar sensoron = async () => {\n  await Amplify.PubSub.publish('lcd-message', {\n    message: '',\n    presence: 1\n  });\n};\n\nvar messagesession = async () => {\n  await Amplify.PubSub.publish('lcd-message', {\n    message: 'The session ML305 - How to become the leader in your DeepRacer league is located at the Aria - Pledingo323 room ',\n    presence: \"request\"\n  });\n};\n\nvar messagemap = async () => {\n  await Amplify.PubSub.publish('lcd-message', {\n    message: '',\n    presence: 1,\n    mapvue: 'true',\n    mapurl: 'www.google.com'\n  });\n};\n\nclass LCD extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      datalcd: null,\n      status: 0,\n      startbact: '',\n      visiblemap: false,\n      mapurl: null,\n      micstatus: 0\n    };\n\n    this.getSub = () => {\n      const datalcd = Amplify.PubSub.subscribe('lcd-message').subscribe({\n        next: data => {\n          var answer = JSON.stringify(data);\n          console.log('answer: ', answer);\n          var objectValue = JSON.parse(answer);\n          var messageiot = objectValue['value'].message;\n          console.log('tip: ', messageiot);\n          var presenceiot = objectValue['value'].presence;\n          console.log('status: ', presenceiot);\n          var mapdisplay = objectValue['value'].mapvue;\n          console.log('mapdisplay: ', mapdisplay);\n          var mapaddress = objectValue['value'].mapurl;\n          console.log('mapaddress: ', mapaddress);\n          var micopen = objectValue['value'].micstatus;\n          console.log('micopen: ', micopen);\n          this.setState({\n            datalcd: messageiot,\n            status: presenceiot,\n            visiblemap: mapdisplay,\n            mapurl: mapaddress,\n            micstatus: micopen\n          });\n        },\n        error: error => console.error(error),\n        close: () => console.log('Done')\n      });\n    };\n  }\n\n  componentDidMount() {\n    this.getSub();\n  }\n\n  openModal() {\n    this.setState({\n      visible: true\n    });\n  }\n\n  closeModal() {\n    this.setState({\n      visiblemap: false\n    });\n  }\n\n  render() {\n    const {\n      datalcd,\n      status,\n      startbact,\n      visible,\n      micstatus\n    } = this.state;\n    const {\n      loading\n    } = this.state;\n    const welcome = 'How can I help?';\n    return React.createElement(\"div\", {\n      className: \"App\",\n      style: {\n        height: \"130vh\",\n        justifyContent: 'center'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146\n      },\n      __self: this\n    }, React.createElement(\"textarea\", {\n      id: \"transcript\",\n      placeholder: \"Real Time transcribe stream\",\n      rows: \"1\",\n      readonly: \"readonly\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"occamy-text-example\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"box\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152\n      },\n      __self: this\n    }, status === 0 ? React.createElement(OccamyText, {\n      maxFontSize: \"150\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153\n      },\n      __self: this\n    }, React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153\n      },\n      __self: this\n    }, React.createElement(TextLoop, {\n      interval: \"4000\",\n      fade: \"true\",\n      children: [\"ASK ME\", React.createElement(\"img\", {\n        src: AWS_logo,\n        alt: \"Logo\",\n        height: \"150%\",\n        width: \"150%\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 153\n        },\n        __self: this\n      })],\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153\n      },\n      __self: this\n    }))) : null, status === 1 ? React.createElement(OccamyText, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154\n      },\n      __self: this\n    }, React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154\n      },\n      __self: this\n    }, \"My name is AVA.\", React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154\n      },\n      __self: this\n    }), \"How can I help?\")) : null, status === \"request\" ? React.createElement(OccamyText, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156\n      },\n      __self: this\n    }, React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156\n      },\n      __self: this\n    }, datalcd)) : null)), React.createElement(\"section\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161\n      },\n      __self: this\n    }), React.createElement(Modal, {\n      visible: this.state.visiblemap,\n      width: \"1200\",\n      height: \"600\",\n      effect: \"fadeInUp\",\n      onClickAway: () => this.closeModal(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164\n      },\n      __self: this\n    }, React.createElement(IframeComponent, {\n      src: \"https://maps.mapwize.io/#/f/p/mgmmap1/room104/t/p/mgmmap1/dining_hall?z=18&k=f0b3b38e6081057f&u=default_universe&l=en&modeId=5e70d546cdd99a0016bc0a37&menu=false&follow=true\",\n      height: \"600\",\n      width: \"1200\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165\n      },\n      __self: this\n    }), React.createElement(\"a\", {\n      href: \"javascript:void(0);\",\n      onClick: () => this.closeModal(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166\n      },\n      __self: this\n    }, \"Close\")))), micstatus === 1 ? {\n      startbutton\n    } : null, React.createElement(\"input\", {\n      type: \"button\",\n      value: \"Open\",\n      onClick: () => this.openModal(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      class: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      class: \"col\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      onClick: startbutton,\n      class: \"button-xl\",\n      title: \"Start Transcription\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      className: \"fa fa-microphone\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178\n      },\n      __self: this\n    }), \" Start\"), React.createElement(\"button\", {\n      id: \"stop-button\",\n      class: \"button-xl\",\n      title: \"Stop Transcription\",\n      disabled: \"true\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      class: \"fa fa-stop-circle\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180\n      },\n      __self: this\n    }), \" Stop\"), React.createElement(\"button\", {\n      onClick: resetbutton,\n      class: \"button-xl button-secondary\",\n      title: \"Clear Transcript\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183\n      },\n      __self: this\n    }, \"Clear Transcript\")), React.createElement(\"div\", {\n      class: \"col\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      onClick: pubSubsensoff,\n      class: \"button-xl\",\n      title: \"Sensor clear\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      className: \"fa fa-microphone\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189\n      },\n      __self: this\n    }), \" Sensor clear\"), React.createElement(\"button\", {\n      onClick: sensoron,\n      class: \"button-xl\",\n      title: \"Sensor prs detected\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      class: \"fa fa-stop-circle\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191\n      },\n      __self: this\n    }), \" Sensor on\"), React.createElement(\"button\", {\n      onClick: messagesession,\n      class: \"button-xl button-secondary\",\n      title: \"Msg session\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194\n      },\n      __self: this\n    }, \"Msg session\"), React.createElement(\"button\", {\n      onClick: messagemap,\n      class: \"button-xl button-secondary\",\n      title: \"Msg map\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197\n      },\n      __self: this\n    }, \"Msg map\"))), React.createElement(\"script\", {\n      src: \"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203\n      },\n      __self: this\n    }), React.createElement(\"script\", {\n      src: \"dist/main.js\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204\n      },\n      __self: this\n    }), this.data);\n  }\n\n}\n\nexport default LCD;","map":{"version":3,"sources":["/home/ec2-user/environment/myapp/src/App.js"],"names":["React","useEffect","useReducer","useState","API","graphqlOperation","Amplify","PubSub","Predictions","AWSIoTProvider","AmazonAIPredictionsProvider","TextLoop","cxs","Textfit","OccamyText","Modal","IframeComponent","Box","Grommet","mic","$","streamAudioToWebSocket","showError","startbutton","stopbutton","resetbutton","AWS_logo","WaveSpinner","awsconfig","configure","Auth","identityPoolId","process","env","REACT_APP_IDENTITY_POOL_ID","region","REACT_APP_REGION","userPoolId","REACT_APP_USER_POOL_ID","userPoolWebClientId","REACT_APP_USER_POOL_WEB_CLIENT_ID","predictions","convert","transcription","proxy","defaults","addPluggable","aws_pubsub_region","aws_pubsub_endpoint","REACT_APP_MQTT_ID","StyledTextLoop","display","pubSubsensoff","publish","message","presence","sensoron","messagesession","messagemap","mapvue","mapurl","LCD","Component","state","datalcd","status","startbact","visiblemap","micstatus","getSub","subscribe","next","data","answer","JSON","stringify","console","log","objectValue","parse","messageiot","presenceiot","mapdisplay","mapaddress","micopen","setState","error","close","componentDidMount","openModal","visible","closeModal","render","loading","welcome","height","justifyContent"],"mappings":"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","sourcesContent":["import React, { useEffect, useReducer, useState } from 'react';\n\nimport API, { graphqlOperation } from '@aws-amplify/api';\nimport Amplify, { PubSub, Predictions } from 'aws-amplify';\nimport { AWSIoTProvider } from '@aws-amplify/pubsub/lib/Providers';\nimport { AmazonAIPredictionsProvider } from '@aws-amplify/predictions';\n\n\nimport TextLoop from \"react-text-loop\";\nimport cxs from \"cxs/component\";\n\nimport { Textfit } from 'react-textfit';\nimport OccamyText from 'react-occamy-text';\n\nimport Modal from 'react-awesome-modal';\nimport IframeComponent from './lib/IframeComponent';\n\nimport { Box,Grommet } from 'grommet';\n\nimport mic from 'microphone-stream';\nimport $ from 'jquery';\nimport streamAudioToWebSocket from  \"./lib/main.js\";\nimport showError from  \"./lib/main.js\";\nimport { startbutton } from \"./lib/main.js\";\nimport { stopbutton } from \"./lib/main.js\";\nimport { resetbutton } from \"./lib/main.js\";\n\n\nimport AWS_logo from \"./images/AWS_logo_RGB_WHT.png\"\n\n// Spinner lib\nimport { WaveSpinner } from \"react-spinners-kit\";\n\n\nimport awsconfig from './aws-exports';\nimport './App.css';\n\n// IoT subscription\n\nAmplify.configure({\n  Auth: {\n    identityPoolId: process.env.REACT_APP_IDENTITY_POOL_ID,\n    region: process.env.REACT_APP_REGION,\n    userPoolId: process.env.REACT_APP_USER_POOL_ID,\n    userPoolWebClientId: process.env.REACT_APP_USER_POOL_WEB_CLIENT_ID,\n  },\n  predictions: {\n        convert: {\n            transcription: {\n                region: \"us-east-1\",\n                proxy: false,\n                defaults: {\n                    \"language\": \"en-US\"\n                }\n            }\n        }\n    }\n});\n\nAmplify.addPluggable(new AWSIoTProvider({\n  aws_pubsub_region: process.env.REACT_APP_REGION,\n  aws_pubsub_endpoint: `wss://${process.env.REACT_APP_MQTT_ID}.iot.${process.env.REACT_APP_REGION}.amazonaws.com/mqtt`,\n}));\n\nAmplify.addPluggable(new AmazonAIPredictionsProvider());\n\n\nconst StyledTextLoop = cxs(TextLoop)({\n  display: \"block\"\n});\n\n\nvar pubSubsensoff = async () => {\n    await Amplify.PubSub.publish('lcd-message', { message: '', presence: 0 });\n}\n\nvar sensoron = async () => {\n    await Amplify.PubSub.publish('lcd-message', { message: '', presence: 1 });\n}\n\nvar messagesession = async () => {\n    await Amplify.PubSub.publish('lcd-message', { message: 'The session ML305 - How to become the leader in your DeepRacer league is located at the Aria - Pledingo323 room ', presence: \"request\" });\n}\n\nvar messagemap = async () => {\n    await Amplify.PubSub.publish('lcd-message', { message: '', presence: 1, mapvue: 'true', mapurl: 'www.google.com' });\n}\n\n\n\n\nclass LCD extends React.Component {\n  state = {\n    datalcd: null,\n    status: 0,\n    startbact: '',\n    visiblemap : false,\n    mapurl: null,\n    micstatus: 0\n  }\n  \n  componentDidMount() {\n    this.getSub()\n    \n  }\n    getSub = () => {\n   const datalcd = Amplify.PubSub.subscribe('lcd-message').subscribe({\n  next: data => {\n    var answer = JSON.stringify(data);\n    console.log('answer: ', answer);\n    var objectValue = JSON.parse(answer);\n    var messageiot = objectValue['value'].message;\n    console.log('tip: ', messageiot);\n    var presenceiot = objectValue['value'].presence;\n    console.log('status: ', presenceiot);\n    var mapdisplay = objectValue['value'].mapvue;\n    console.log('mapdisplay: ', mapdisplay)\n    var mapaddress = objectValue['value'].mapurl;\n    console.log('mapaddress: ', mapaddress);\n    var micopen = objectValue['value'].micstatus;\n    console.log('micopen: ', micopen);\n    this.setState({datalcd: messageiot, status: presenceiot, visiblemap: mapdisplay, mapurl: mapaddress, micstatus: micopen});\n  },\n  error: error => console.error(error),\n  close: () => console.log('Done'),\n});\n  }\n\n    openModal() {\n        this.setState({\n            visible : true\n        });\n    }\n \n    closeModal() {\n        this.setState({\n            visiblemap : false\n        });\n    }\n\n  render(){\n    const {datalcd, status, startbact, visible, micstatus} = this.state;\n      const { loading } = this.state;\n    const welcome = 'How can I help?';\n    return (\n      <div className=\"App\"style = {{height:\"130vh\", justifyContent: 'center'}}>\n      <textarea id=\"transcript\" placeholder=\"Real Time transcribe stream\" rows=\"1\"\n      readonly=\"readonly\"></textarea>\n\n\n               <div className=\"occamy-text-example\">\n                <div className=\"box\">\n                      {(status === 0) ? <OccamyText maxFontSize='150'><h3><TextLoop interval='4000' fade='true' children={[\"ASK ME\", <img src={AWS_logo} alt=\"Logo\" height=\"150%\" width=\"150%\" />]} /></h3></OccamyText> : null}\n                      {(status === 1) ? <OccamyText><h3>My name is AVA.<br/>\n      How can I help?</h3></OccamyText> : null }\n                      {(status === \"request\") ? <OccamyText><h3>{datalcd}</h3></OccamyText>: null}\n                </div>\n              </div>\n                            \n              <section>\n                <h1></h1>\n                \n                <Modal visible={this.state.visiblemap} width=\"1200\" height=\"600\" effect=\"fadeInUp\" onClickAway={() => this.closeModal()}>\n                    <div>\n                        <IframeComponent src=\"https://maps.mapwize.io/#/f/p/mgmmap1/room104/t/p/mgmmap1/dining_hall?z=18&k=f0b3b38e6081057f&u=default_universe&l=en&modeId=5e70d546cdd99a0016bc0a37&menu=false&follow=true\" height=\"600\" width=\"1200\"/>\n                        <a href=\"javascript:void(0);\" onClick={() => this.closeModal()}>Close</a>\n                    </div>\n                </Modal>\n            </section>\n            \n            {(micstatus === 1) ? {startbutton}: null}\n          \n       {/* DEBUG SECTION*/}\n       <input type=\"button\" value=\"Open\" onClick={() => this.openModal()} />\n        <div class=\"row\">\n            <div class=\"col\">\n                <button onClick={startbutton} class=\"button-xl\" title=\"Start Transcription\">\n                    <i className=\"fa fa-microphone\"></i> Start\n                </button>\n                <button id=\"stop-button\" class=\"button-xl\" title=\"Stop Transcription\" disabled=\"true\"><i\n                        class=\"fa fa-stop-circle\"></i> Stop\n                </button>\n                <button onClick={resetbutton} class=\"button-xl button-secondary\" title=\"Clear Transcript\"> \n                    Clear Transcript\n                </button>\n            </div>\n                        <div class=\"col\">\n                <button onClick={pubSubsensoff} class=\"button-xl\" title=\"Sensor clear\">\n                    <i className=\"fa fa-microphone\"></i> Sensor clear\n                </button>\n                <button onClick={sensoron} class=\"button-xl\" title=\"Sensor prs detected\"><i\n                        class=\"fa fa-stop-circle\"></i> Sensor on\n                </button>\n                <button onClick={messagesession} class=\"button-xl button-secondary\" title=\"Msg session\"> \n                    Msg session\n                </button>\n                <button onClick={messagemap} class=\"button-xl button-secondary\" title=\"Msg map\"> \n                    Msg map\n                </button>\n\n            </div>\n        </div>\n          <script src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js\"></script>\n          <script src=\"dist/main.js\"></script>\n\n       {this.data}\n      </div>\n    );\n  }\n}\n\n\nexport default LCD;\n\n\n"]},"metadata":{},"sourceType":"module"}